(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{276:function(e,t,n){var content=n(306);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(22).default)("f1948356",content,!0,{sourceMap:!1})},305:function(e,t,n){"use strict";var r=n(276);n.n(r).a},306:function(e,t,n){(e.exports=n(21)(!1)).push([e.i,".app-secondary-button[data-v-5ff429ff]{margin-top:8px}",""])},327:function(e,t,n){"use strict";n.r(t);n(54),n(38),n(4);var r=n(0),o=n(2),l=n(205),c=n(209),d=n(207),f=n(208),h=n(210),x=n(284),v=n(265),m=n(212),k=n(206),F=n(264),_=(n(225),n(55),n(15)),y={mixins:[k.a,F.a],components:{AppButton:l.a,AppFoto:c.a,AppHeader:d.a,DialogBox:f.a,NavLink:h.a,AppFileInput:x.a,SecondaryButton:v.a,Message:m.a},data:function(){return{helpBlock:{reset:!0,help:!0},dialogText:"What about insurance",dialogSubText:"Please upload your Certificate of Insurance.",insuranceFile:null,fileTypes:".jpg, .jpeg, .png, .pdf, application/pdf, image/png, image/jpeg",errors:{type:"",size:""},errorMessage:"",navigation:{next:"/banking",links:[{text:"Go Back",link:"/noa"},{text:"Finish Later",link:"/later"}]}}},watch:{errors:function(){this.errors.size?this.errorMessage=this.errors.size:this.errors.type?this.errorMessage=this.errors.type:this.errorMessage=""}},computed:{error:function(){return this.errors.size||this.errors.type}},methods:Object(o.a)({},Object(_.b)(["setMainError","setLoading"]),Object(_.b)("modules/insurance",["uploadFile","saveFile"]),{submit:function(){var e=Object(r.a)(regeneratorRuntime.mark(function e(){var t,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.insuranceFile){e.next=9;break}return this.setLoading(!0),e.next=4,this.uploadFile(this.prepareFileData());case 4:return t=e.sent,e.next=7,this.handleUploadResponse(t);case 7:n=e.sent,this.handleSaveResponse(n);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleUploadResponse:function(e){if(e.data&&e.data.id)return this.saveFile({id:e.data.id,ext:this.getFileExtension(this.insuranceFile.name)})},handleSaveResponse:function(e){e.data.errors?this.setMainError(e.data.errors.map(function(e){return e.message}).join(", ")):e.data.data&&this.$router.replace(this.navigation.next)},prepareFileData:function(){var form=new FormData;return form.append("file",this.insuranceFile),form},skipStep:function(){this.$router.replace(this.navigation.next)}})},B=(n(305),n(11)),component=Object(B.a)(y,function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app"},[n("AppHeader",{attrs:{helpBlock:e.helpBlock}}),e._v(" "),n("main",{staticClass:"main"},[n("AppFoto",{staticClass:"app-foto"}),e._v(" "),n("DialogBox",{staticClass:"app-dialog-box",attrs:{text:e.dialogText,subtext:e.dialogSubText}}),e._v(" "),e.errorMessage?n("Message",{staticClass:"error-message",attrs:{type:"warning",messageText:e.errorMessage}}):e._e(),e._v(" "),n("AppFileInput",{attrs:{extensions:"image",fileModel:e.insuranceFile,name:"insurance",uploadButtonText:"Upload certificate",deleteButtonText:"Replace file",accept:e.fileTypes},scopedSlots:e._u([{key:"submit",fn:function(){return[n("AppButton",{staticClass:"file-control__submit",attrs:{text:"Next"},nativeOn:{click:function(t){return e.submit(t)}}})]},proxy:!0}]),model:{value:e.insuranceFile,callback:function(t){e.insuranceFile=t},expression:"insuranceFile"}}),e._v(" "),e.insuranceFile?e._e():n("SecondaryButton",{staticClass:"app-secondary-button",attrs:{text:"Skip"},nativeOn:{click:function(t){return e.skipStep(t)}}})],1),e._v(" "),n("nav",{staticClass:"navigation"},[n("ul",{staticClass:"navigation__list"},e._l(e.navigation.links,function(nav,e){return n("li",{key:"nav-"+e+"-"+nav.text,staticClass:"navigation__element"},[n("NavLink",{attrs:{text:nav.text,link:nav.link}})],1)}),0)])],1)},[],!1,null,"5ff429ff",null);t.default=component.exports}}]);